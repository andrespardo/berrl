<html>
<head>
<meta charset=utf-8 />
<title>PipeGeoJSON Demo</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src="https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.js"></script>



<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<style>
table, th, td {
    border: 1px solid black;
}
</style>


<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>

<div id='map'></div>

<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibXVycGh5MjE0IiwiYSI6ImNpam5kb3puZzAwZ2l0aG01ZW1uMTRjbnoifQ.5Znb4MArp7v3Wwrn6WFE6A';
var map = L.mapbox.map('map', 'mapbox.streets',{
    center: [38, -102.0],
    zoom: 5
    });

// omnivore will AJAX-request this file behind the scenes and parse it: 

// note that there are considerations:
// - The file must either be on the same domain as the page that requests it,
//   or both the server it is requested from and the user's browser must
//   support CORS.

// Internally this uses the toGeoJSON library to decode the KML file
// into GeoJSON







function addDataToMap1(data, map) {
    var dataLayer = L.geoJson(data);
    dataLayer.addTo(map);
}
$.getJSON('http://localhost:8000/blocks_on_line.geojson',function(data) { addDataToMap1(data,map); });function addDataToMap1(data, map) {
    var dataLayer = L.geoJson(data, {
        onEachFeature: function(feature, layer) {            var popupText = "<table><tr><th>COUNT: </th><td>" + feature.properties['COUNT']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT4: </th><td>" + feature.properties['LAT4']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT1: </th><td>" + feature.properties['LAT1']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT3: </th><td>" + feature.properties['LAT3']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT2: </th><td>" + feature.properties['LAT2']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG3: </th><td>" + feature.properties['LONG3']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG2: </th><td>" + feature.properties['LONG2']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG1: </th><td>" + feature.properties['LONG1']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG4: </th><td>" + feature.properties['LONG4']+"</td></tr>";             var popupText = popupText+ "<tr><th>GEOHASH: </th><td>" + feature.properties['GEOHASH']+"</td></tr>"; 
	    		layer.setStyle({color: '#1766B5', weight: 3, opacity: 1});
	            layer.bindPopup(popupText, {autoPan:false, maxHeight:500, maxWidth:350} ); }
        });
    dataLayer.addTo(map);
}

function addDataToMap2(data, map) {
    var dataLayer = L.geoJson(data);
    dataLayer.addTo(map);
}
$.getJSON('http://localhost:8000/line.geojson',function(data) { addDataToMap2(data,map); });function addDataToMap2(data, map) {
    var dataLayer = L.geoJson(data, {
        onEachFeature: function(feature, layer) {            var popupText = "<table><tr><th>CRTSRoadsI: </th><td>" + feature.properties['CRTSRoadsI']+"</td></tr>";             var popupText = popupText+ "<tr><th>COUNTYNUM: </th><td>" + feature.properties['COUNTYNUM']+"</td></tr>";             var popupText = popupText+ "<tr><th>Shape_len: </th><td>" + feature.properties['Shape_len']+"</td></tr>";             var popupText = popupText+ "<tr><th>supplement: </th><td>" + feature.properties['supplement']+"</td></tr>";             var popupText = popupText+ "<tr><th>GEOHASH: </th><td>" + feature.properties['GEOHASH']+"</td></tr>";             var popupText = popupText+ "<tr><th>FROMtermin: </th><td>" + feature.properties['FROMtermin']+"</td></tr>";             var popupText = popupText+ "<tr><th>LabelRt: </th><td>" + feature.properties['LabelRt']+"</td></tr>";             var popupText = popupText+ "<tr><th>signsystem: </th><td>" + feature.properties['signsystem']+"</td></tr>";             var popupText = popupText+ "<tr><th>Bridgesect: </th><td>" + feature.properties['Bridgesect']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONG: </th><td>" + feature.properties['LONG']+"</td></tr>";             var popupText = popupText+ "<tr><th>ROUTEID: </th><td>" + feature.properties['ROUTEID']+"</td></tr>";             var popupText = popupText+ "<tr><th>routenum: </th><td>" + feature.properties['routenum']+"</td></tr>";             var popupText = popupText+ "<tr><th>LOC_ERROR: </th><td>" + feature.properties['LOC_ERROR']+"</td></tr>";             var popupText = popupText+ "<tr><th>subroute: </th><td>" + feature.properties['subroute']+"</td></tr>";             var popupText = popupText+ "<tr><th>BEGINMP: </th><td>" + feature.properties['BEGINMP']+"</td></tr>";             var popupText = popupText+ "<tr><th>TOtermini: </th><td>" + feature.properties['TOtermini']+"</td></tr>";             var popupText = popupText+ "<tr><th>Search: </th><td>" + feature.properties['Search']+"</td></tr>";             var popupText = popupText+ "<tr><th>DATE_CC_OR: </th><td>" + feature.properties['DATE_CC_OR']+"</td></tr>";             var popupText = popupText+ "<tr><th>COUNTY: </th><td>" + feature.properties['COUNTY']+"</td></tr>";             var popupText = popupText+ "<tr><th>ENDMP: </th><td>" + feature.properties['ENDMP']+"</td></tr>";             var popupText = popupText+ "<tr><th>LabelSRt: </th><td>" + feature.properties['LabelSRt']+"</td></tr>";             var popupText = popupText+ "<tr><th>SECTnum: </th><td>" + feature.properties['SECTnum']+"</td></tr>";             var popupText = popupText+ "<tr><th>LENGTH: </th><td>" + feature.properties['LENGTH']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT: </th><td>" + feature.properties['LAT']+"</td></tr>"; 
	    		layer.setStyle({color: '#1766B5', weight: 3, opacity: 1});
	            layer.bindPopup(popupText, {autoPan:false, maxHeight:500, maxWidth:350} ); }
        });
    dataLayer.addTo(map);
}

function addDataToMap3(data, map) {
    var dataLayer = L.geoJson(data);
    dataLayer.addTo(map);
}
$.getJSON('http://localhost:8000/points.geojson',function(data) { addDataToMap3(data,map); });function addDataToMap3(data, map) {
    var dataLayer = L.geoJson(data, {
        onEachFeature: function(feature, layer) {            var popupText = "<table><tr><th>YOUNG_OLD: </th><td>" + feature.properties['YOUNG_OLD']+"</td></tr>";             var popupText = popupText+ "<tr><th>LON: </th><td>" + feature.properties['LON']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR15: </th><td>" + feature.properties['VAR15']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR24C: </th><td>" + feature.properties['VAR24C']+"</td></tr>";             var popupText = popupText+ "<tr><th>VE_FORMS: </th><td>" + feature.properties['VE_FORMS']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR22C: </th><td>" + feature.properties['VAR22C']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR10: </th><td>" + feature.properties['VAR10']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR12: </th><td>" + feature.properties['VAR12']+"</td></tr>";             var popupText = popupText+ "<tr><th>SZ_STATE_CZ_COUNTY: </th><td>" + feature.properties['SZ_STATE_CZ_COUNTY']+"</td></tr>";             var popupText = popupText+ "<tr><th>ST_CASE: </th><td>" + feature.properties['ST_CASE']+"</td></tr>";             var popupText = popupText+ "<tr><th>Unnamed: 0: </th><td>" + feature.properties['Unnamed: 0']+"</td></tr>";             var popupText = popupText+ "<tr><th>HOUR: </th><td>" + feature.properties['HOUR']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR11: </th><td>" + feature.properties['VAR11']+"</td></tr>";             var popupText = popupText+ "<tr><th>CRASH_TIME: </th><td>" + feature.properties['CRASH_TIME']+"</td></tr>";             var popupText = popupText+ "<tr><th>PED_PEDAL: </th><td>" + feature.properties['PED_PEDAL']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR12C: </th><td>" + feature.properties['VAR12C']+"</td></tr>";             var popupText = popupText+ "<tr><th>SZ_STATE: </th><td>" + feature.properties['SZ_STATE']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR11C: </th><td>" + feature.properties['VAR11C']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR15C: </th><td>" + feature.properties['VAR15C']+"</td></tr>";             var popupText = popupText+ "<tr><th>LAT: </th><td>" + feature.properties['LAT']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR8C: </th><td>" + feature.properties['VAR8C']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR23C: </th><td>" + feature.properties['VAR23C']+"</td></tr>";             var popupText = popupText+ "<tr><th>MINUTE: </th><td>" + feature.properties['MINUTE']+"</td></tr>";             var popupText = popupText+ "<tr><th>LONGITUDE: </th><td>" + feature.properties['LONGITUDE']+"</td></tr>";             var popupText = popupText+ "<tr><th>FATALS: </th><td>" + feature.properties['FATALS']+"</td></tr>";             var popupText = popupText+ "<tr><th>COUNTY: </th><td>" + feature.properties['COUNTY']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR25C: </th><td>" + feature.properties['VAR25C']+"</td></tr>";             var popupText = popupText+ "<tr><th>STATE: </th><td>" + feature.properties['STATE']+"</td></tr>";             var popupText = popupText+ "<tr><th>STANAME: </th><td>" + feature.properties['STANAME']+"</td></tr>";             var popupText = popupText+ "<tr><th>YEAR: </th><td>" + feature.properties['YEAR']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR24: </th><td>" + feature.properties['VAR24']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR25: </th><td>" + feature.properties['VAR25']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR26: </th><td>" + feature.properties['VAR26']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR27: </th><td>" + feature.properties['VAR27']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR20: </th><td>" + feature.properties['VAR20']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR21: </th><td>" + feature.properties['VAR21']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR22: </th><td>" + feature.properties['VAR22']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR23: </th><td>" + feature.properties['VAR23']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR28: </th><td>" + feature.properties['VAR28']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR7: </th><td>" + feature.properties['VAR7']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR1: </th><td>" + feature.properties['VAR1']+"</td></tr>";             var popupText = popupText+ "<tr><th>CNTYNAME: </th><td>" + feature.properties['CNTYNAME']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR9: </th><td>" + feature.properties['VAR9']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR8: </th><td>" + feature.properties['VAR8']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR17: </th><td>" + feature.properties['VAR17']+"</td></tr>";             var popupText = popupText+ "<tr><th>LCSTANAME: </th><td>" + feature.properties['LCSTANAME']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR16: </th><td>" + feature.properties['VAR16']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR10C: </th><td>" + feature.properties['VAR10C']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR28C: </th><td>" + feature.properties['VAR28C']+"</td></tr>";             var popupText = popupText+ "<tr><th>LATITUDE: </th><td>" + feature.properties['LATITUDE']+"</td></tr>";             var popupText = popupText+ "<tr><th>GEOHASH: </th><td>" + feature.properties['GEOHASH']+"</td></tr>";             var popupText = popupText+ "<tr><th>VAR9C: </th><td>" + feature.properties['VAR9C']+"</td></tr>"; 				layer.setIcon(L.mapbox.marker.icon({'marker-color': '#1766B5'}))
	            layer.bindPopup(popupText, {autoPan:false, maxHeight:500, maxWidth:350} ); }
        });
    dataLayer.addTo(map);
}

</script>


</body>
</html>